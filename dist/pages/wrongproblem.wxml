
<scroll-view scroll-y class="DrawerPage {{modalName=='viewModal'?'show':''}}">
    <view class="flex bg-white align-center padding">
        <button class="cu-btn bg-blue round shadow flex-sub" bindtap="onClickCreateWrongProblem">
            添加错题
        </button>
        <view class="padding flex-sub text-center text-black text-lg text-bold" bindtap="onClickWrongProblem">
            错题列表
        </view>
        <view class="padding flex-sub text-right">
            
        </view>
    </view>
    <view class="cu-bar search bg-white">
        <view class="search-form round">
            <text class="cuIcon-search"/>
            <input type="text" placeholder="搜索题目" confirm-type="search" bindinput="inputChangeSearch"/>
        </view>
        <view class="action">
            <button class="cu-btn bg-green shadow-blur round">搜索</button>
        </view>
    </view>

    <view class="cu-card">
        <view class="cu-item shadow radius  bg-grey">
            <view class="flex align-center">
                <image class="cu-avatar round margin" src="{{ student.Sicon?imgUrl + student.Sicon:'' }}" background-size="cover"/>
                <view class="margin">
                    <view class="text-black text-lg text-bold">{{ student.Snickname }}</view>
                </view>        
            </view>
            
            <view class="flex padding">
                <view class="flex-sub text-black text-sm">年级：{{ student.SgradeName }}</view>
                <view class="flex-sub text-black text-sm">校区：{{ student.Cname }}</view>
            </view>
        </view>
    </view>
    
    <view class="justify-between flex bg-white align-center padding-lr-xs">
        <scroll-view class="bg-white nav" scroll-x scroll-with-animation="scroll-with-animation" style="width:90vw">
            <view class="cu-item {{index==screenCur.subjectCur?'text-orange cur':''}}"  wx:for="{{exerciseField.Esubject}}" wx:key="wx:key" wx:for-item="item" bindtap="tabSelectIndex" data-id="{{index}}" data-name="subject">
                {{item}}
            </view>
        </scroll-view>
        <view class="bg-white margin-tb solid-left flex align-center" bindtap="showModal" data-target="viewModal">
            <view class="margin-lr-xs text-sm">筛选</view>
            <image class="" style="width:40rpx;height:40rpx" src="{{imageScreen}}"/>
        </view>
    </view>
    


    <view  wx:for="{{wrongProblemList}}" wx:key="index" wx:for-item="wrongProblem" data-id="{{index}}" bindtap="onClickWrongProblem">
        <mp-slideview buttons="{{slideButtons}}" icon="{{true}}" bindbuttontap="slideButtonTap" data-index="{{index}}">
            
        <view class="padding-left padding-right bg-white solid-bottom">
            <view class="flex p-xs mb-sm">
                <!-- 左半边 -->
                <view class="flex-treble padding-sm">
                    <!-- 里面两行，上面行 -->
                    <view class="exercise_upper">
                        <!-- 题目难度标签 -->
                        <view class="cu-tag radius bg-{{difficultyColor[wrongProblem.Wdifficulty]}} light margin-right-xs">
                            {{wrongProblem.Wdifficulty}}
                        </view>
                        <!-- 题目title -->
                        <view class="title margin-lr-xs">
                            {{wrongProblem.Wtitle}}
                        </view>
                        
                    </view>

                    <!-- 下面行 -->
                    <view class="flex">
                        <view class="margin-right-xs">
                            {{wrongProblem.Wsubject}}
                        </view>
                        <view class="margin-lr-xs">
                            {{wrongProblem.Wtype}}
                        </view>
                    </view>
                </view>
                <!-- 右半边 -->
                <view class="flex-sub padding-sm">
                    <view class="text-center">
                        {{wrongProblem.Wgrade}}
                    </view>
                </view>
            </view>
        </view>
        </mp-slideview>
    </view>
</scroll-view>

<mp-dialog title="删除错题" show="{{dialogShow}}" bindbuttontap="tapDeleteDialogButton" buttons="{{buttons}}">
      <view>确定要删除此错题吗？</view>
</mp-dialog>

<view class="DrawerClose {{modalName=='viewModal'?'show':''}}" bindtap="hideModal">
    <text class="cuIcon-pullright"/>
</view>

<scroll-view scroll-y class="DrawerWindow {{modalName=='viewModal'?'show':''}}">
    <view class="flex padding">
        <view class="flex-sub padding">重置</view>
        <view class="flex-sub padding text-center" style="font-weight:bold">筛选错题</view>
        <view class="flex-sub padding text-right" style="color:blue" bindtap="hideModal">完成</view>
    </view>
    <view>
        <view class="margin" style="font-weight:bold">年级</view>
        <view class="grid col-{{exerciseField.Egrade.length>3?3:exerciseField.Egrade.length}} margin text-center">
            <view  wx:for="{{exerciseField.Egrade}}" wx:key="wx:key">
                <button class="round cu-btn lines-{{screenCur.gradeCur==index?'blue':'gray'}} shadow padding margin-tb-sm" bindtap="tabSelect" data-name="grade" data-id="{{index}}">{{exerciseField.Egrade[index]}}</button>
            </view>
        </view>
    </view>
    <view>
        <view class="margin" style="font-weight:bold">错题难度</view>
        <view class="grid col-{{exerciseField.Edifficulty.length>4?4:exerciseField.Edifficulty.length}} margin text-center">
            <view  wx:for="{{exerciseField.Edifficulty}}" wx:key="wx:key">
                <button class="round cu-btn lines-{{screenCur.difficultyCur==index?'blue':'gray'}} shadow padding margin-tb-sm" bindtap="tabSelect" data-name="difficulty" data-id="{{index}}">{{exerciseField.Edifficulty[index]}}</button>
            </view>
        </view>
    </view>
    <view>
        <view class="margin" style="font-weight:bold">错题类型</view>
        <view class="margin">学科</view>
        <view class="grid col-{{exerciseField.Esubject.length>4?4:exerciseField.Esubject.length}} margin text-center">
            <view wx:for="{{exerciseField.Esubject}}" wx:key="wx:key">
                <button class="round cu-btn lines-{{screenCur.subjectCur==index?'blue':'gray'}} shadow padding margin-tb-sm" bindtap="tabSelect" data-name="subject" data-id="{{index}}">{{exerciseField.Esubject[index]}}</button>
            </view>
        </view>
        <view class="margin">题型</view>
        <view class="grid margin text-center col-{{exerciseField.Etype[exerciseField.Esubject[screenCur.subjectCur]].length>3?3:exerciseField.Etype[exerciseField.Esubject[screenCur.subjectCur]].length}}">
            <view wx:for="{{exerciseField.Etype[exerciseField.Esubject[screenCur.subjectCur]]}}" wx:key="wx:key" wx-for-item="item">
                <button class="round cu-btn lines-{{screenCur.typeCur==index?'blue':'gray'}} shadow padding margin-tb-sm" bindtap="tabSelect" data-name="type" data-id="{{index}}">{{item}}</button>
            </view>
        </view>
        <view class="margin">单元</view>
        <view class="grid margin text-center col-{{exerciseField.Eunit[exerciseField.Esubject[screenCur.subjectCur]].length>3?3:exerciseField.Eunit[exerciseField.Esubject[screenCur.subjectCur]].length}}">
            <view wx:for="{{exerciseField.Eunit[exerciseField.Esubject[screenCur.subjectCur]]}}" wx:key="wx:key" wx-for-item="item">
                <button class="round cu-btn lines-{{screenCur.unitCur==index?'blue':'gray'}} shadow padding margin-tb-sm" bindtap="tabSelect" data-name="unit" data-id="{{index}}">{{item}}</button>
            </view>
        </view>
    </view>
</scroll-view>